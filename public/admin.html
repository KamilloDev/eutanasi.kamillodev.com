<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <title>Admin - Stemmetælling</title>
</head>
<body>
  <h1>Stemmetælling</h1>
  <div id="vote-counts"></div>

  <script>
    // Prompt for admin password
    const adminPassword = prompt('Indtast admin password:');

    fetch('/vote-counts', {
      method: 'GET',
      headers: {
        'Authorization': 'Basic ' + btoa('admin:' + adminPassword)
      }
    })
    .then(response => {
      if (response.status === 401) {
        throw new Error('Unauthorized');
      }
      return response.json();
    })
    .then(data => {
      const countsDiv = document.getElementById('vote-counts');
      data.forEach(item => {
        const p = document.createElement('p');
        p.textContent = `${item.vote_option}: ${item.vote_count}`;
        countsDiv.appendChild(p);
      });
    })
    .catch(error => {
      console.error('Error:', error);
      alert('Kunne ikke hente stemmerne. Tjek om du har indtastet det korrekte password.');
    });
  </script>
</body>
</html>